<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> <%= restaurant.name %> - KarFind</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg custom-navbar">
        <div class="container nav-container">
            <img src="/img/karfind.png" class="logo">
            <a class="navbar-brand nunito-font" href="/index.html">KarFind</a>
                
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="collapse navbar-collapse d-flex justify-content-between nunito-font" id="navbarNav">
                <ul class="navbar-nav ">
                    <li class="nav-item"><a class="nav-link" href="/index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/eateries">Discover Eateries</a></li>
                    <li class="nav-item"><a id="addRestaurantLink" class="nav-link" href="/addRestaurant.html">Add Restaurant</a></li>
                    <!-- <li class="nav-item"><a class="nav-link" href="profile.html">Profile</a></li> -->
                </ul>
    
                <a href="profileUpdated.html" class=" login-link"><i class="fa-solid fa-circle-user fa-2x"></i></a>
            </div>
        </div>
    </nav>

    <!-- Lola's Lutong Bahay Page -->
    <div class="container">
        <h1 class="text-left fw-bold mb-2 pt-10 roboto-font"><%= restaurant.name %></h1>
        <div class="restaurant-rating nunito-font">
            <p>4.4 ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (1.1k) | ‚Ç±</p>
        </div>
    
        <!-- Location & Pictures Section -->
        <div class="info-container">
            <!-- Photo Gallery -->
            <div class="photo-container">
                <h2 class="fw-bold robot-font">üì∑ Pictures</h2>
                <div class="photo-row">
                    <% restaurant.restoPhotos.forEach(function(photo, index) { %>
                        <div class="photo-item">
                            <img src="<%= photo %>" onclick="openModal('image<%= index + 1 %>')">
                        </div>
                    <% }); %>
                    <div class="photo-item">
                        <img src="<%= (restaurant.restoPhotos && restaurant.restoPhotos.length > 0) ? restaurant.restoPhotos[0] : (restaurant.photos && restaurant.photos.length > 0) ? restaurant.photos[0] : '/img/background.jpg' %>" onclick="openGallery()">
                        <div class="overlay" onclick="openGallery()">üì∑ All Photos (<%= (restaurant.restoPhotos && restaurant.restoPhotos.length) || (restaurant.photos && restaurant.photos.length) || 0 %>)</div>
                    </div>
                </div>
                <h2 class="fw-bold robot-font mt-5">Description</h2>
                <p> <%= restaurant.description %></p>
            </div>
                    
        

            <!-- Location -->
            <div class="location-container">
                <h2 class="fw-bold roboto-font">üìçLocation </h2>
                <iframe src=" <%= restaurant.googleMap %>" 
                    width="400" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    <p class="nunito-font location-text">
                        <i class="fa-solid fa-location-dot" style="font-size: 22px; color: #ff5733; margin-right: 8px;"></i>
                        <%= restaurant.address %>
                    </p>
                        <!-- Contact -->
                <div class="contact-container">
                    <h2 class="fw-bold roboto-font">üìû Contact</h2>
                    <p class="text-muted nunito-font"><%= restaurant.contact %></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Reviews Section -->
    <div class="review-section">
        <h4 class="fw-bold">üåü Reviews</h4>
        <div class="review-container", id = "reviewlist">
            <div class="review-box">
                <div class="box-top">
                    <div class="profile">
                        <div class="name-user">
                            <strong>Kanye</strong>
                        </div>
                        <div class="date">March 20, 2025</div>
                    </div>
                    <div class="review-actions">
                        <button class="btn btn-custom" onclick="editReview(this)">
                            <i class="fa-solid fa-pen"></i> Edit
                        </button>
                        <button class="btn btn-custom" onclick="deleteReview(this)">
                            <i class="fa-solid fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
                <div class="box-bottom">
                    <div class="reviews">
                        <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</div>
                    </div>
                    <div class="customer-comment-title">
                        <strong>Filipino food made vegan</strong>
                    </div>
                    <div class="customer-comment-p">
                        <p>Filipino food made vegan. Has many Filipino foods and they are very tasty. Protein rich options, but unfortunately no options with veggies. Cool little spot and the owners are very friendly. Recommended!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
        <!-- Write a Review -->
        <div class="mt-5 d-flex justify-content-center">
            <div class="review-form-container w-50">
                <h3 class="text-center">Write a Review</h3>
                <form id="reviewForm">
                    <div class="mb-3">
                        <label for="reviewTitle" class="form-label">Review Title</label>
                        <input type="text" class="form-control" id="reviewTitle" placeholder="Best Kare-Kare in Town!">
                    </div>
                    <div class="mb-3">
                        <label for="reviewContent" class="form-label">Your Review</label>
                        <textarea class="form-control" id="reviewContent" rows="3" placeholder="Share your experience..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="reviewRating" class="form-label">Rating</label>
                        <select class="form-select" id="reviewRating">
                            <option value="5">‚≠ê 5 - Excellent</option>
                            <option value="4">‚≠ê 4 - Very Good</option>
                            <option value="3">‚≠ê 3 - Average</option>
                            <option value="2">‚≠ê 2 - Below Average</option>
                            <option value="1">‚≠ê 1 - Poor</option>
                        </select>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-custom" onclick="submitReview()">Submit Review</button>
                    </div>
                </form>
            </div>
        </div>


    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImg">
    </div>
    
    <!-- Full Gallery Modal -->
    <div id="galleryModal" class="modal">
        <span class="close" onclick="closeGallery()">&times;</span>
        <div class="gallery-content">
            <% restaurant.restoPhotos.forEach(function(photo) { %>
                <img src="<%= photo %>" class="gallery-img">
            <% }) %>
        </div>
    </div>

        <!-- Back Button -->
        <div class="text-center pt-3">
            <a href="/eateries" class="btn btn-custom">‚¨Ö Back to Discover Eateries</a>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-3">
        <p class="mb-0">KarFind &copy; 2025 | Discover the Best Carinderias in Sta. Rosa</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/scripts.js"></script>
    <script src="/js/reviewScript.js"></script>
    <script src="/js/profileScript.js"></script>
</body>
</html>